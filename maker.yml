packages:
  - plyr
  - rmarkdown
  - knitr
  - maps
  - mapdata
  - Taxonstand
  - taxize
  - methods
  - bibtex

sources:
  - R/

include:
  # This file is automatically generated and is quite large.  It defines
  # targets for each data set, plus the 'baad' target.
  - maker_data.yml
  # This defines all the reports and including it greatly slows down
  # maker (both in the startup time and in checking the dependency
  # graph).  Commenting it out might be useful sometimes.
  - maker_reports.yml

targets:
  all:
    depends: baad
  manuscript:
    depends: ms/ms.html
  everything:
    depends:
      - export
      - manuscript
      - reports

  author_info:
    command: author_details("config/contact.csv", baad)
  output/authors.csv:
    command: save_author_details(author_info, target_name)

  ms/ms.md:
    knitr:
      chdir: true
      auto_figure_prefix: true
    packages:
      - whisker
      - knitcitations
    depends:
      - baad
      - author_info
      - ms/refs.bib

  ms/ms.html:
    command: render_ms("ms/ms.md")
    quiet: true

  ## exporting targets
  export:
    depends:
      - output/baad.rds
      - output/baad_data.csv
      - output/baad_contacts.csv
      - output/baad_references.csv
      - output/baad_metadata.csv
      - output/baad.bib
      - output/baad_dictionary.csv

  output/baad.rds:
    command: saveRDS(baad, target_name)
  output/baad_data.csv:
    command: write_csv(baad_data, target_name)
  output/baad_contacts.csv:
    command: write_csv(baad_contacts, target_name)
  output/baad_references.csv:
    command: write_csv(baad_references, target_name)
  output/baad_metadata.csv:
    command: write_csv(baad_metadata, target_name)
  output/baad.bib:
    command: write.bib(baad_bibtex, target_name)
    quiet: true
  output/baad_dictionary.csv:
    command: write_csv(baad_dictionary, target_name)

  ## baad elements
  baad_data:
    command: extract_baad_data(baad)
  baad_contacts:
    command: extract_baad_contacts(baad)
  baad_references:
    command: extract_baad_references(baad)
  baad_metadata:
    command: extract_baad_metadata(baad)
  baad_bibtex:
    command: extract_baad_bibtex(baad)
  baad_dictionary:
    command: extract_baad_dictionary(baad)
